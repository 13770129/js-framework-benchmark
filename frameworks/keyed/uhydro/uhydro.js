var d=Symbol("value"),N=Symbol("name"),f=new WeakMap,m=new WeakMap,g=new Map,a=[],b=v({});function k(e,t,...s){if(typeof e===y.function)return e({...t,children:s});if(h(e))return k("",void 0,e.children);let n=e===""?document.createDocumentFragment():document.createElement(e);for(let[o,u]of Object.entries(t??{}))o in n?n[o]=u:n.setAttribute(o,String(u));n.append(...s.flat(Infinity));let[i,r,c]=a.pop()||[];if(i){let o=s.flatMap(q);try{if(o.includes(c)||(!o.includes(c)&&F(n)?n.textContent.includes(c):n.outerHTML.includes(c))){let u=F(n)?n.firstChild:n;if(f.has(i))f.get(i).push(u);else{let l=[u];f.set(i,l)}m.set(u,[r,c])}}catch{return n}}return n}function W(e,t){t?t.replaceWith(e):document.body.insertBefore(e,null)}var p=!1;function v(e){Reflect.set(n,d,e);let t=new Proxy(n,{set(i,r,c,o){let u=Reflect.get(i,r,o);if(u===c)return!0;let l=Reflect.set(i,r,c,o);return u!=null&&l&&!p&&R(H,c,o),g.has(o)&&g.get(o).forEach(O.bind(O,c,u)),l},get(i,r,c){let o=Reflect.get(i,d),u=h(o),l;u&&(l=Reflect.get(o,r,c)||o);let T=[c,r,u?l:o];return a.push(T),queueMicrotask(C.bind(C,T)),u?l:M.bind(M,o)}}),s=V();return Reflect.set(t,N,s),b&&!Reflect.has(b,s)&&(p=!0,Reflect.set(b,s,t),p=!1),t;function n(i){if(t!==null){if(i===null){Reflect.deleteProperty(t,d);let r;g.has(t)&&g.delete(t),f.has(t)&&(r=f.get(t),f.delete(t));for(let c=0;r&&c<r.length;c++){let o=r[c];m.has(o)&&m.delete(o)}t=i;return}else if(typeof i===y.function){n(i(Reflect.get(t,d)));return}Reflect.set(t,d,i)}}}function I(e,t){g.has(e)?g.get(e).push(t):g.set(e,[t])}function O(e,t,s){s(e,t)}function z(e,t,s){let n=document.body.querySelector(e),i=Reflect.get(t,d).map(s);n.append(...i),I(t,j.bind(j,n,s))}function j(e,t,s,n){let i=new Set([...n,...s]).size===n?.length+s?.length;if(!s?.length||n?.length===s?.length||i){e.textContent="";for(let r=0;r<n.length;r++)n[r](null)}if(n?.length&&s?.length>n?.length){let r=n.length,o=(i?s:s.slice(r)).map(L.bind(L,t,r));e.append(...o)}else if(s?.length&&s?.length<n.length)n.reverse().forEach(E.bind(E,e,s,n.length-1)),s.forEach(S.bind(S,e,t,n));else if(n?.length===0||n?.length===s?.length){let r=s.map(t);e.append(...r)}}function L(e,t,s,n){return e(s,n+t)}function S(e,t,s,n,i){s.includes(n)||e.appendChild(t(n,i))}function E(e,t,s,n,i){t.includes(n)||(n(null),e.childNodes[s-i]?.remove())}function H(e,t){if(f.has(t)){let s=f.get(t);for(let n=0;n<s.length;n++){let i=s[n],[r,c]=m.get(i),o=h(e)?Reflect.get(e,r):e,u=!1;!B(i)&&i.outerHTML.includes(c)&&(u=i.getAttributeNames().some(x.bind(x,i,c,o))),u||(i.textContent=i.textContent.replace(c,o)),m.set(i,[r,o])}}}function x(e,t,s,n){if(e.getAttribute(n)===t)return e.setAttribute(n,s),!0}function R(e,...t){navigator.scheduling?navigator.scheduling.isInputPending()?setTimeout(R,0,e,...t):e(...t):(requestIdleCallback||setTimeout)(e.bind(e,...t))}function $(e){return Reflect.get(e,d)}function M(e){return e}function q(e){return String(e)}function A(e,t){return e===t}function V(){return Math.random().toString(32).slice(2)}function h(e){return e!=null&&typeof e=="object"}function C(e){let t=a.findIndex(A.bind(A,e));a.splice(t,1)}function B(e){return e.splitText!==void 0}function F(e){return e.nodeName!=="svg"&&"getElementById"in e}var y;(function(t){t.function="function"})(y||(y={}));export{$ as getValue,k as h,I as observe,v as reactive,W as render,z as view};
